!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var o=!1,t=!1,r=5e3,i=2e3,n=0,s=e;var l=["ms","moz","webkit","o"],a=window.requestAnimationFrame||!1,c=window.cancelAnimationFrame||!1;if(!a)for(var d in l){var u=l[d];a||(a=window[u+"RequestAnimationFrame"]),c||(c=window[u+"CancelAnimationFrame"]||window[u+"CancelRequestAnimationFrame"])}var h,p,m=window.MutationObserver||window.WebKitMutationObserver||!1,f={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(h=document.getElementsByTagName("script"),p=h[h.length-1].src.split("?")[0],p.split("/").length>0?p.split("/").slice(0,-1).join("/")+"/":"")},g=!1,w=function(e,l){var d=this;if(this.version="3.5.4",this.name="nicescroll",this.me=l,this.opt={doc:s("body"),win:!1},s.extend(this.opt,f),this.opt.snapbackspeed=80,e)for(var u in d.opt)void 0!==e[u]&&(d.opt[u]=e[u]);this.doc=d.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(d.opt.win?d.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==d.opt.win,this.win=d.opt.win||(this.ispage?s(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?s(window):this.win,this.body=s("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=d.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+i++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=d.opt.overflowx,this.overflowy=d.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(g)return g;var e=document.createElement("DIV"),o={};o.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,o.isopera="opera"in window,o.isopera12=o.isopera&&"getUserMedia"in navigator,o.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),o.isie="all"in document&&"attachEvent"in e&&!o.isopera,o.isieold=o.isie&&!("msInterpolationMode"in e.style),o.isie7=o.isie&&!o.isieold&&(!("documentMode"in document)||7==document.documentMode),o.isie8=o.isie&&"documentMode"in document&&8==document.documentMode,o.isie9=o.isie&&"performance"in window&&document.documentMode>=9,o.isie10=o.isie&&"performance"in window&&document.documentMode>=10,o.isie9mobile=/iemobile.9/i.test(navigator.userAgent),o.isie9mobile&&(o.isie9=!1),o.isie7mobile=!o.isie9mobile&&o.isie7&&/iemobile/i.test(navigator.userAgent),o.ismozilla="MozAppearance"in e.style,o.iswebkit="WebkitAppearance"in e.style,o.ischrome="chrome"in window,o.ischrome22=o.ischrome&&o.haspointerlock,o.ischrome26=o.ischrome&&"transition"in e.style,o.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,o.hasmstouch=window.navigator.msPointerEnabled||!1,o.ismac=/^mac$/i.test(navigator.platform),o.isios=o.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),o.isios4=o.isios&&!("seal"in Object),o.isandroid=/android/i.test(navigator.userAgent),o.trstyle=!1,o.hastransform=!1,o.hastranslate3d=!1,o.transitionstyle=!1,o.hastransition=!1,o.transitionend=!1;for(var t=["transform","msTransform","webkitTransform","MozTransform","OTransform"],r=0;r<t.length;r++)if(void 0!==e.style[t[r]]){o.trstyle=t[r];break}o.hastransform=0!=o.trstyle,o.hastransform&&(e.style[o.trstyle]="translate3d(1px,2px,3px)",o.hastranslate3d=/translate3d/.test(e.style[o.trstyle])),o.transitionstyle=!1,o.prefixstyle="",o.transitionend=!1;t=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var i=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],n=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(r=0;r<t.length;r++)if(t[r]in e.style){o.transitionstyle=t[r],o.prefixstyle=i[r],o.transitionend=n[r];break}return o.ischrome26&&(o.prefixstyle=i[1]),o.hastransition=o.transitionstyle,o.cursorgrabvalue=function(){var t=["-moz-grab","-webkit-grab","grab"];(o.ischrome&&!o.ischrome22||o.isie)&&(t=[]);for(var r=0;r<t.length;r++){var i=t[r];if(e.style.cursor=i,e.style.cursor==i)return i}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}(),o.hasmousecapture="setCapture"in e,o.hasMutationObserver=!1!==m,e=null,g=o,o}();var h=s.extend({},this.detected);this.canhwscroll=h.hastransform&&d.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&d.haswrapper,this.istouchcapable=!1,h.cantouch&&h.iswebkit&&!h.isios&&!h.isandroid&&(this.istouchcapable=!0,h.cantouch=!1),h.cantouch&&h.ismozilla&&!h.isios&&!h.isandroid&&(this.istouchcapable=!0,h.cantouch=!1),d.opt.enablemouselockapi||(h.hasmousecapture=!1,h.haspointerlock=!1),this.delayed=function(e,o,t,r){var i=d.delaylist[e],n=(new Date).getTime();if(!r&&i&&i.tt)return!1;i&&i.tt&&clearTimeout(i.tt),i&&i.last+t>n&&!i.tt?d.delaylist[e]={last:n+t,tt:setTimeout(function(){d&&(d.delaylist[e].tt=0,o.call())},t)}:i&&i.tt||(d.delaylist[e]={last:n,tt:0},setTimeout(function(){o.call()},0))},this.debounced=function(e,o,t){var r=d.delaylist[e];(new Date).getTime();d.delaylist[e]=o,r||setTimeout(function(){var o=d.delaylist[e];d.delaylist[e]=!1,o.call()},t)};var p=!1;if(this.synched=function(e,o){return d.synclist[e]=o,p||(a(function(){for(e in p=!1,d.synclist){var o=d.synclist[e];o&&o.call(d),d.synclist[e]=!1}}),p=!0),e},this.unsynched=function(e){d.synclist[e]&&(d.synclist[e]=!1)},this.css=function(e,o){for(var t in o)d.saved.css.push([e,t,e.css(t)]),e.css(t,o[t])},this.scrollTop=function(e){return void 0===e?d.getScrollTop():d.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?d.getScrollLeft():d.setScrollLeft(e)},BezierClass=function(e,o,t,r,i,n,s){this.st=e,this.ed=o,this.spd=t,this.p1=r||0,this.p2=i||1,this.p3=n||0,this.p4=s||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,o=this.B2(e)+this.B3(e)+this.B4(e);return e<0?this.ed:this.st+Math.round(this.df*o)},update:function(e,o){return this.st=this.getNow(),this.ed=e,this.spd=o,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){function w(){var e=d.doc.css(h.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},h.hastranslate3d&&h.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var o=w();if(o)return 16==o.length?-o[13]:-o[5];if(d.timerscroll&&d.timerscroll.bz)return d.timerscroll.bz.getNow()}return d.doc.translate.y},this.getScrollLeft=function(e){if(!e){var o=w();if(o)return 16==o.length?-o[12]:-o[4];if(d.timerscroll&&d.timerscroll.bh)return d.timerscroll.bh.getNow()}return d.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(e){var o=document.createEvent("UIEvents");o.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(o)}:document.fireEvent?this.notifyScrollEvent=function(e){var o=document.createEventObject();e.fireEvent("onscroll"),o.cancelBubble=!0}:this.notifyScrollEvent=function(e,o){};h.hastranslate3d&&d.opt.enabletranslate3d?(this.setScrollTop=function(e,o){d.doc.translate.y=e,d.doc.translate.ty=-1*e+"px",d.doc.css(h.trstyle,"translate3d("+d.doc.translate.tx+","+d.doc.translate.ty+",0px)"),o||d.notifyScrollEvent(d.win[0])},this.setScrollLeft=function(e,o){d.doc.translate.x=e,d.doc.translate.tx=-1*e+"px",d.doc.css(h.trstyle,"translate3d("+d.doc.translate.tx+","+d.doc.translate.ty+",0px)"),o||d.notifyScrollEvent(d.win[0])}):(this.setScrollTop=function(e,o){d.doc.translate.y=e,d.doc.translate.ty=-1*e+"px",d.doc.css(h.trstyle,"translate("+d.doc.translate.tx+","+d.doc.translate.ty+")"),o||d.notifyScrollEvent(d.win[0])},this.setScrollLeft=function(e,o){d.doc.translate.x=e,d.doc.translate.tx=-1*e+"px",d.doc.css(h.trstyle,"translate("+d.doc.translate.tx+","+d.doc.translate.ty+")"),o||d.notifyScrollEvent(d.win[0])})}else this.getScrollTop=function(){return d.docscroll.scrollTop()},this.setScrollTop=function(e){return d.docscroll.scrollTop(e)},this.getScrollLeft=function(){return d.docscroll.scrollLeft()},this.setScrollLeft=function(e){return d.docscroll.scrollLeft(e)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,o){if(!e)return!1;for(var t=e.target||e.srcElement||e||!1;t&&t.id!=o;)t=t.parentNode||!1;return!1!==t};var b={thin:1,medium:3,thick:5};function y(e,o,t){var r=e.css(o),i=parseFloat(r);if(isNaN(i)){var n=3==(i=b[r]||0)?t?d.win.outerHeight()-d.win.innerHeight():d.win.outerWidth()-d.win.innerWidth():1;return d.isie8&&i&&(i+=1),n?i:0}return i}function x(e,o,t,r){d._bind(e,o,function(r){var i={original:r=r||window.event,target:r.target||r.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return r.preventDefault?r.preventDefault():r.returnValue=!1,!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};return"mousewheel"==o?(i.deltaY=-.025*r.wheelDelta,r.wheelDeltaX&&(i.deltaX=-.025*r.wheelDeltaX)):i.deltaY=r.detail,t.call(e,i)},r)}function S(e,o,t){var r,i;if(0==e.deltaMode?(r=-Math.floor(e.deltaX*(d.opt.mousescrollstep/54)),i=-Math.floor(e.deltaY*(d.opt.mousescrollstep/54))):1==e.deltaMode&&(r=-Math.floor(e.deltaX*d.opt.mousescrollstep),i=-Math.floor(e.deltaY*d.opt.mousescrollstep)),o&&d.opt.oneaxismousemode&&0==r&&i&&(r=i,i=0),r&&(d.scrollmom&&d.scrollmom.stop(),d.lastdeltax+=r,d.debounced("mousewheelx",function(){var e=d.lastdeltax;d.lastdeltax=0,d.rail.drag||d.doScrollLeftBy(e)},15)),i){if(d.opt.nativeparentscrolling&&t&&!d.ispage&&!d.zoomactive)if(i<0){if(d.getScrollTop()>=d.page.maxh)return!0}else if(d.getScrollTop()<=0)return!0;d.scrollmom&&d.scrollmom.stop(),d.lastdeltay+=i,d.debounced("mousewheely",function(){var e=d.lastdeltay;d.lastdeltay=0,d.rail.drag||d.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}this.getOffset=function(){if(d.isfixed)return{top:parseFloat(d.win.css("top")),left:parseFloat(d.win.css("left"))};if(!d.viewport)return d.win.offset();var e=d.win.offset(),o=d.viewport.offset();return{top:e.top-o.top+d.viewport.scrollTop(),left:e.left-o.left+d.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(d.ishwscroll)d.rail.css({height:d.win.innerHeight()}),d.railh&&d.railh.css({width:d.win.innerWidth()});else{var o=d.getOffset();(r={top:o.top,left:o.left}).top+=y(d.win,"border-top-width",!0);d.win.outerWidth(),d.win.innerWidth();r.left+=d.rail.align?d.win.outerWidth()-y(d.win,"border-right-width")-d.rail.width:y(d.win,"border-left-width");var t=d.opt.railoffset;if(t&&(t.top&&(r.top+=t.top),d.rail.align&&t.left&&(r.left+=t.left)),d.locked||d.rail.css({top:r.top,left:r.left,height:e?e.h:d.win.innerHeight()}),d.zoom&&d.zoom.css({top:r.top+1,left:1==d.rail.align?r.left-20:r.left+d.rail.width+4}),d.railh&&!d.locked){var r={top:o.top,left:o.left},i=d.railh.align?r.top+y(d.win,"border-top-width",!0)+d.win.innerHeight()-d.railh.height:r.top+y(d.win,"border-top-width",!0),n=r.left+y(d.win,"border-left-width");d.railh.css({top:i,left:n,width:d.railh.width})}}},this.doRailClick=function(e,o,t){var r,i,n,s;d.locked||(d.cancelEvent(e),o?(r=t?d.doScrollLeft:d.doScrollTop)(n=t?(e.pageX-d.railh.offset().left-d.cursorwidth/2)*d.scrollratio.x:(e.pageY-d.rail.offset().top-d.cursorheight/2)*d.scrollratio.y):(r=t?d.doScrollLeftBy:d.doScrollBy,n=t?d.scroll.x:d.scroll.y,s=t?e.pageX-d.railh.offset().left:e.pageY-d.rail.offset().top,i=t?d.view.w:d.view.h,r(n>=s?i:-i)))},d.hasanimationframe=a,d.hascancelanimationframe=c,d.hasanimationframe?d.hascancelanimationframe||(c=function(){d.cancelAnimationFrame=!0}):(a=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},c=clearInterval),this.init=function(){if(d.saved.css=[],h.isie7mobile)return!0;if(h.isoperamini)return!0;if(h.hasmstouch&&d.css(d.ispage?s("html"):d.win,{"-ms-touch-action":"none"}),d.zindex="auto",d.ispage||"auto"!=d.opt.zindex?d.zindex=d.opt.zindex:d.zindex=function(){var e=d.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var o=e.css("zIndex");if(!isNaN(o)&&0!=o)return parseInt(o);e=e.parent()}return!1}()||"auto",d.ispage||"auto"==d.zindex||d.zindex>n&&(n=d.zindex),d.isie&&0==d.zindex&&"auto"==d.opt.zindex&&(d.zindex="auto"),!d.ispage||!h.cantouch&&!h.isieold&&!h.isie9mobile){var e=d.docscroll;d.ispage&&(e=d.haswrapper?d.win:d.doc),h.isie9mobile||d.css(e,{"overflow-y":"hidden"}),d.ispage&&h.isie7&&("BODY"==d.doc[0].nodeName?d.css(s("html"),{"overflow-y":"hidden"}):"HTML"==d.doc[0].nodeName&&d.css(s("body"),{"overflow-y":"hidden"})),!h.isios||d.ispage||d.haswrapper||d.css(s("body"),{"-webkit-overflow-scrolling":"touch"}),(f=s(document.createElement("div"))).css({position:"relative",top:0,float:"right",width:d.opt.cursorwidth,height:"0px","background-color":d.opt.cursorcolor,border:d.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":d.opt.cursorborderradius,"-moz-border-radius":d.opt.cursorborderradius,"border-radius":d.opt.cursorborderradius}),f.hborder=parseFloat(f.outerHeight()-f.innerHeight()),d.cursor=f;var i=s(document.createElement("div"));i.attr("id",d.id),i.addClass("nicescroll-rails");var l,a,c=["left","right"];for(var u in c)a=c[u],(l=d.opt.railpadding[a])?i.css("padding-"+a,l+"px"):d.opt.railpadding[a]=0;i.append(f),i.width=Math.max(parseFloat(d.opt.cursorwidth),f.outerWidth())+d.opt.railpadding.left+d.opt.railpadding.right,i.css({width:i.width+"px",zIndex:d.zindex,background:d.opt.background,cursor:"default"}),i.visibility=!0,i.scrollable=!0,i.align="left"==d.opt.railalign?0:1,d.rail=i,d.rail.drag=!1;var p=!1;if(!d.opt.boxzoom||d.ispage||h.isieold||(p=document.createElement("div"),d.bind(p,"click",d.doZoom),d.zoom=s(p),d.zoom.css({cursor:"pointer","z-index":d.zindex,backgroundImage:"url("+d.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),d.opt.dblclickzoom&&d.bind(d.win,"dblclick",d.doZoom),h.cantouch&&d.opt.gesturezoom&&(d.ongesturezoom=function(e){return e.scale>1.5&&d.doZoomIn(e),e.scale<.8&&d.doZoomOut(e),d.cancelEvent(e)},d.bind(d.win,"gestureend",d.ongesturezoom))),d.railh=!1,d.opt.horizrailenabled){var f;d.css(e,{"overflow-x":"hidden"}),(f=s(document.createElement("div"))).css({position:"relative",top:0,height:d.opt.cursorwidth,width:"0px","background-color":d.opt.cursorcolor,border:d.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":d.opt.cursorborderradius,"-moz-border-radius":d.opt.cursorborderradius,"border-radius":d.opt.cursorborderradius}),f.wborder=parseFloat(f.outerWidth()-f.innerWidth()),d.cursorh=f;var g=s(document.createElement("div"));g.attr("id",d.id+"-hr"),g.addClass("nicescroll-rails"),g.height=Math.max(parseFloat(d.opt.cursorwidth),f.outerHeight()),g.css({height:g.height+"px",zIndex:d.zindex,background:d.opt.background}),g.append(f),g.visibility=!0,g.scrollable=!0,g.align="top"==d.opt.railvalign?0:1,d.railh=g,d.railh.drag=!1}if(d.ispage)i.css({position:"fixed",top:"0px",height:"100%"}),i.align?i.css({right:"0px"}):i.css({left:"0px"}),d.body.append(i),d.railh&&(g.css({position:"fixed",left:"0px",width:"100%"}),g.align?g.css({bottom:"0px"}):g.css({top:"0px"}),d.body.append(g));else{if(d.ishwscroll){"static"==d.win.css("position")&&d.css(d.win,{position:"relative"});var w="HTML"==d.win[0].nodeName?d.body:d.win;d.zoom&&(d.zoom.css({position:"absolute",top:1,right:0,"margin-right":i.width+4}),w.append(d.zoom)),i.css({position:"absolute",top:0}),i.align?i.css({right:0}):i.css({left:0}),w.append(i),g&&(g.css({position:"absolute",left:0,bottom:0}),g.align?g.css({bottom:0}):g.css({top:0}),w.append(g))}else{d.isfixed="fixed"==d.win.css("position");var b=d.isfixed?"fixed":"absolute";d.isfixed||(d.viewport=d.getViewport(d.win[0])),d.viewport&&(d.body=d.viewport,0==/fixed|relative|absolute/.test(d.viewport.css("position"))&&d.css(d.viewport,{position:"relative"})),i.css({position:b}),d.zoom&&d.zoom.css({position:b}),d.updateScrollBar(),d.body.append(i),d.zoom&&d.body.append(d.zoom),d.railh&&(g.css({position:b}),d.body.append(g))}h.isios&&d.css(d.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),h.isie&&d.opt.disableoutline&&d.win.attr("hideFocus","true"),h.iswebkit&&d.opt.disableoutline&&d.win.css({outline:"none"})}if(!1===d.opt.autohidemode?(d.autohidedom=!1,d.rail.css({opacity:d.opt.cursoropacitymax}),d.railh&&d.railh.css({opacity:d.opt.cursoropacitymax})):!0===d.opt.autohidemode||"leave"===d.opt.autohidemode?(d.autohidedom=s().add(d.rail),h.isie8&&(d.autohidedom=d.autohidedom.add(d.cursor)),d.railh&&(d.autohidedom=d.autohidedom.add(d.railh)),d.railh&&h.isie8&&(d.autohidedom=d.autohidedom.add(d.cursorh))):"scroll"==d.opt.autohidemode?(d.autohidedom=s().add(d.rail),d.railh&&(d.autohidedom=d.autohidedom.add(d.railh))):"cursor"==d.opt.autohidemode?(d.autohidedom=s().add(d.cursor),d.railh&&(d.autohidedom=d.autohidedom.add(d.cursorh))):"hidden"==d.opt.autohidemode&&(d.autohidedom=!1,d.hide(),d.locked=!1),h.isie9mobile){d.scrollmom=new v(d),d.onmangotouch=function(e){var o=d.getScrollTop(),t=d.getScrollLeft();if(o==d.scrollmom.lastscrolly&&t==d.scrollmom.lastscrollx)return!0;var r=o-d.mangotouch.sy,i=t-d.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(r,2)))){var n=r<0?-1:1,s=i<0?-1:1,l=+new Date;if(d.mangotouch.lazy&&clearTimeout(d.mangotouch.lazy),l-d.mangotouch.tm>80||d.mangotouch.dry!=n||d.mangotouch.drx!=s)d.scrollmom.stop(),d.scrollmom.reset(t,o),d.mangotouch.sy=o,d.mangotouch.ly=o,d.mangotouch.sx=t,d.mangotouch.lx=t,d.mangotouch.dry=n,d.mangotouch.drx=s,d.mangotouch.tm=l;else{d.scrollmom.stop(),d.scrollmom.update(d.mangotouch.sx-i,d.mangotouch.sy-r);d.mangotouch.tm;d.mangotouch.tm=l;var a=Math.max(Math.abs(d.mangotouch.ly-o),Math.abs(d.mangotouch.lx-t));d.mangotouch.ly=o,d.mangotouch.lx=t,a>2&&(d.mangotouch.lazy=setTimeout(function(){d.mangotouch.lazy=!1,d.mangotouch.dry=0,d.mangotouch.drx=0,d.mangotouch.tm=0,d.scrollmom.doMomentum(30)},100))}}};var y=d.getScrollTop(),x=d.getScrollLeft();d.mangotouch={sy:y,ly:y,dry:0,sx:x,lx:x,drx:0,lazy:!1,tm:0},d.bind(d.docscroll,"scroll",d.onmangotouch)}else{if(h.cantouch||d.istouchcapable||d.opt.touchbehavior||h.hasmstouch){d.scrollmom=new v(d),d.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType)return!1;if(d.hasmoving=!1,!d.locked){if(h.hasmstouch)for(var o=!!e.target&&e.target;o;){var t=s(o).getNiceScroll();if(t.length>0&&t[0].me==d.me)break;if(t.length>0)return!1;if("DIV"==o.nodeName&&o.id==d.id)break;o=!!o.parentNode&&o.parentNode}if(d.cancelScroll(),o=d.getTarget(e))if(/INPUT/i.test(o.nodeName)&&/range/i.test(o.type))return d.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),d.forcescreen){var r=e;(e={original:e.original?e.original:e}).clientX=r.screenX,e.clientY=r.screenY}if(d.rail.drag={x:e.clientX,y:e.clientY,sx:d.scroll.x,sy:d.scroll.y,st:d.getScrollTop(),sl:d.getScrollLeft(),pt:2,dl:!1},d.ispage||!d.opt.directionlockdeadzone)d.rail.drag.dl="f";else{var i={w:s(window).width(),h:s(window).height()},n={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},l=Math.max(0,n.h-i.h),a=Math.max(0,n.w-i.w);!d.rail.scrollable&&d.railh.scrollable?d.rail.drag.ck=l>0&&"v":d.rail.scrollable&&!d.railh.scrollable?d.rail.drag.ck=a>0&&"h":d.rail.drag.ck=!1,d.rail.drag.ck||(d.rail.drag.dl="f")}if(d.opt.touchbehavior&&d.isiframe&&h.isie){var c=d.win.position();d.rail.drag.x+=c.left,d.rail.drag.y+=c.top}if(d.hasmoving=!1,d.lastmouseup=!1,d.scrollmom.reset(e.clientX,e.clientY),!h.cantouch&&!this.istouchcapable&&!h.hasmstouch){if(!(!!o&&/INPUT|SELECT|TEXTAREA/i.test(o.nodeName)))return!d.ispage&&h.hasmousecapture&&o.setCapture(),d.opt.touchbehavior?(o.onclick&&!o._onclick&&(o._onclick=o.onclick,o.onclick=function(e){if(d.hasmoving)return!1;o._onclick.call(this,e)}),d.cancelEvent(e)):d.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(s(o).attr("type"))&&(pc={tg:o,click:!1},d.preventclick=pc)}}},d.ontouchend=function(e){return(!e.pointerType||2==e.pointerType)&&(d.rail.drag&&2==d.rail.drag.pt&&(d.scrollmom.doMomentum(),d.rail.drag=!1,d.hasmoving&&(d.lastmouseup=!0,d.hideCursor(),h.hasmousecapture&&document.releaseCapture(),!h.cantouch))?d.cancelEvent(e):void 0)};var S=d.opt.touchbehavior&&d.isiframe&&!h.hasmousecapture;d.ontouchmove=function(e,o){if(e.pointerType&&2!=e.pointerType)return!1;if(d.rail.drag&&2==d.rail.drag.pt){if(h.cantouch&&void 0===e.original)return!0;if(d.hasmoving=!0,d.preventclick&&!d.preventclick.click&&(d.preventclick.click=d.preventclick.tg.onclick||!1,d.preventclick.tg.onclick=d.onpreventclick),"changedTouches"in(e=s.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),d.forcescreen){var t=e;(e={original:e.original?e.original:e}).clientX=t.screenX,e.clientY=t.screenY}var r=ofy=0;if(S&&!o){var i=d.win.position();r=-i.left,ofy=-i.top}var n=e.clientY+ofy,l=n-d.rail.drag.y,a=e.clientX+r,c=a-d.rail.drag.x,u=d.rail.drag.st-l;if(d.ishwscroll&&d.opt.bouncescroll?u<0?u=Math.round(u/2):u>d.page.maxh&&(u=d.page.maxh+Math.round((u-d.page.maxh)/2)):(u<0&&(u=0,n=0),u>d.page.maxh&&(u=d.page.maxh,n=0)),d.railh&&d.railh.scrollable){var p=d.rail.drag.sl-c;d.ishwscroll&&d.opt.bouncescroll?p<0?p=Math.round(p/2):p>d.page.maxw&&(p=d.page.maxw+Math.round((p-d.page.maxw)/2)):(p<0&&(p=0,a=0),p>d.page.maxw&&(p=d.page.maxw,a=0))}var m=!1;if(d.rail.drag.dl)m=!0,"v"==d.rail.drag.dl?p=d.rail.drag.sl:"h"==d.rail.drag.dl&&(u=d.rail.drag.st);else{var f=Math.abs(l),g=Math.abs(c),w=d.opt.directionlockdeadzone;if("v"==d.rail.drag.ck){if(f>w&&g<=.3*f)return d.rail.drag=!1,!0;g>w&&(d.rail.drag.dl="f",s("body").scrollTop(s("body").scrollTop()))}else if("h"==d.rail.drag.ck){if(g>w&&f<=.3*g)return d.rail.drag=!1,!0;f>w&&(d.rail.drag.dl="f",s("body").scrollLeft(s("body").scrollLeft()))}}if(d.synched("touchmove",function(){d.rail.drag&&2==d.rail.drag.pt&&(d.prepareTransition&&d.prepareTransition(0),d.rail.scrollable&&d.setScrollTop(u),d.scrollmom.update(a,n),d.railh&&d.railh.scrollable?(d.setScrollLeft(p),d.showCursor(u,p)):d.showCursor(u),h.isie10&&document.selection.clear())}),h.ischrome&&d.istouchcapable&&(m=!1),m)return d.cancelEvent(e)}}}if(d.onmousedown=function(e,o){if(!d.rail.drag||1==d.rail.drag.pt){if(d.locked)return d.cancelEvent(e);d.cancelScroll(),d.rail.drag={x:e.clientX,y:e.clientY,sx:d.scroll.x,sy:d.scroll.y,pt:1,hr:!!o};var t=d.getTarget(e);return!d.ispage&&h.hasmousecapture&&t.setCapture(),d.isiframe&&!h.hasmousecapture&&(d.saved.csspointerevents=d.doc.css("pointer-events"),d.css(d.doc,{"pointer-events":"none"})),d.hasmoving=!1,d.cancelEvent(e)}},d.onmouseup=function(e){if(d.rail.drag){if(h.hasmousecapture&&document.releaseCapture(),d.isiframe&&!h.hasmousecapture&&d.doc.css("pointer-events",d.saved.csspointerevents),1!=d.rail.drag.pt)return;return d.rail.drag=!1,d.hasmoving&&d.triggerScrollEnd(),d.cancelEvent(e)}},d.onmousemove=function(e){if(d.rail.drag){if(1!=d.rail.drag.pt)return;if(h.ischrome&&0==e.which)return d.onmouseup(e);if(d.cursorfreezed=!0,d.hasmoving=!0,d.rail.drag.hr){d.scroll.x=d.rail.drag.sx+(e.clientX-d.rail.drag.x),d.scroll.x<0&&(d.scroll.x=0);var o=d.scrollvaluemaxw;d.scroll.x>o&&(d.scroll.x=o)}else{d.scroll.y=d.rail.drag.sy+(e.clientY-d.rail.drag.y),d.scroll.y<0&&(d.scroll.y=0);var t=d.scrollvaluemax;d.scroll.y>t&&(d.scroll.y=t)}return d.synched("mousemove",function(){d.rail.drag&&1==d.rail.drag.pt&&(d.showCursor(),d.rail.drag.hr?d.doScrollLeft(Math.round(d.scroll.x*d.scrollratio.x),d.opt.cursordragspeed):d.doScrollTop(Math.round(d.scroll.y*d.scrollratio.y),d.opt.cursordragspeed))}),d.cancelEvent(e)}},h.cantouch||d.opt.touchbehavior)d.onpreventclick=function(e){if(d.preventclick)return d.preventclick.tg.onclick=d.preventclick.click,d.preventclick=!1,d.cancelEvent(e)},d.bind(d.win,"mousedown",d.ontouchstart),d.onclick=!h.isios&&function(e){return!d.lastmouseup||(d.lastmouseup=!1,d.cancelEvent(e))},d.opt.grabcursorenabled&&h.cursorgrabvalue&&(d.css(d.ispage?d.doc:d.win,{cursor:h.cursorgrabvalue}),d.css(d.rail,{cursor:h.cursorgrabvalue}));else{"getSelection"in document?d.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?d.hasTextSelected=function(){return"None"!=document.selection.type}:d.hasTextSelected=function(){return!1},d.onselectionstart=function(e){d.ispage||(d.selectiondrag=d.win.offset())},d.onselectionend=function(e){d.selectiondrag=!1},d.onselectiondrag=function(e){d.selectiondrag&&d.hasTextSelected()&&d.debounced("selectionscroll",function(){!function e(o){if(d.selectiondrag){if(o){var t=d.win.outerHeight(),r=o.pageY-d.selectiondrag.top;r>0&&r<t&&(r=0),r>=t&&(r-=t),d.selectiondrag.df=r}if(0!=d.selectiondrag.df){var i=2*-Math.floor(d.selectiondrag.df/6);d.doScrollBy(i),d.debounced("doselectionscroll",function(){e()},50)}}}(e)},250)}}h.hasmstouch&&(d.css(d.rail,{"-ms-touch-action":"none"}),d.css(d.cursor,{"-ms-touch-action":"none"}),d.bind(d.win,"MSPointerDown",d.ontouchstart),d.bind(document,"MSPointerUp",d.ontouchend),d.bind(document,"MSPointerMove",d.ontouchmove),d.bind(d.cursor,"MSGestureHold",function(e){e.preventDefault()}),d.bind(d.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(d.bind(d.win,"touchstart",d.ontouchstart),d.bind(document,"touchend",d.ontouchend),d.bind(document,"touchcancel",d.ontouchend),d.bind(document,"touchmove",d.ontouchmove)),d.bind(d.cursor,"mousedown",d.onmousedown),d.bind(d.cursor,"mouseup",d.onmouseup),d.railh&&(d.bind(d.cursorh,"mousedown",function(e){d.onmousedown(e,!0)}),d.bind(d.cursorh,"mouseup",d.onmouseup)),(d.opt.cursordragontouch||!h.cantouch&&!d.opt.touchbehavior)&&(d.rail.css({cursor:"default"}),d.railh&&d.railh.css({cursor:"default"}),d.jqbind(d.rail,"mouseenter",function(){if(!d.win.is(":visible"))return!1;d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.rail,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}),d.opt.sensitiverail&&(d.bind(d.rail,"click",function(e){d.doRailClick(e,!1,!1)}),d.bind(d.rail,"dblclick",function(e){d.doRailClick(e,!0,!1)}),d.bind(d.cursor,"click",function(e){d.cancelEvent(e)}),d.bind(d.cursor,"dblclick",function(e){d.cancelEvent(e)})),d.railh&&(d.jqbind(d.railh,"mouseenter",function(){if(!d.win.is(":visible"))return!1;d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.railh,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}),d.opt.sensitiverail&&(d.bind(d.railh,"click",function(e){d.doRailClick(e,!1,!0)}),d.bind(d.railh,"dblclick",function(e){d.doRailClick(e,!0,!0)}),d.bind(d.cursorh,"click",function(e){d.cancelEvent(e)}),d.bind(d.cursorh,"dblclick",function(e){d.cancelEvent(e)})))),h.cantouch||d.opt.touchbehavior?(d.bind(h.hasmousecapture?d.win:document,"mouseup",d.ontouchend),d.bind(document,"mousemove",d.ontouchmove),d.onclick&&d.bind(document,"click",d.onclick),d.opt.cursordragontouch&&(d.bind(d.cursor,"mousedown",d.onmousedown),d.bind(d.cursor,"mousemove",d.onmousemove),d.cursorh&&d.bind(d.cursorh,"mousedown",function(e){d.onmousedown(e,!0)}),d.cursorh&&d.bind(d.cursorh,"mousemove",d.onmousemove))):(d.bind(h.hasmousecapture?d.win:document,"mouseup",d.onmouseup),d.bind(document,"mousemove",d.onmousemove),d.onclick&&d.bind(document,"click",d.onclick),!d.ispage&&d.opt.enablescrollonselection&&(d.bind(d.win[0],"mousedown",d.onselectionstart),d.bind(document,"mouseup",d.onselectionend),d.bind(d.cursor,"mouseup",d.onselectionend),d.cursorh&&d.bind(d.cursorh,"mouseup",d.onselectionend),d.bind(document,"mousemove",d.onselectiondrag)),d.zoom&&(d.jqbind(d.zoom,"mouseenter",function(){d.canshowonmouseevent&&d.showCursor(),d.rail.active=!0}),d.jqbind(d.zoom,"mouseleave",function(){d.rail.active=!1,d.rail.drag||d.hideCursor()}))),d.opt.enablemousewheel&&(d.isiframe||d.bind(h.isie&&d.ispage?document:d.win,"mousewheel",d.onmousewheel),d.bind(d.rail,"mousewheel",d.onmousewheel),d.railh&&d.bind(d.railh,"mousewheel",d.onmousewheelhr)),d.ispage||h.cantouch||/HTML|^BODY/.test(d.win[0].nodeName)||(d.win.attr("tabindex")||d.win.attr({tabindex:r++}),d.jqbind(d.win,"focus",function(e){o=d.getTarget(e).id||!0,d.hasfocus=!0,d.canshowonmouseevent&&d.noticeCursor()}),d.jqbind(d.win,"blur",function(e){o=!1,d.hasfocus=!1}),d.jqbind(d.win,"mouseenter",function(e){t=d.getTarget(e).id||!0,d.hasmousefocus=!0,d.canshowonmouseevent&&d.noticeCursor()}),d.jqbind(d.win,"mouseleave",function(){t=!1,d.hasmousefocus=!1,d.rail.drag||d.hideCursor()}))}if(d.onkeypress=function(e){if(d.locked&&0==d.page.maxh)return!0;e=e||window.e;var r=d.getTarget(e);if(r&&/INPUT|TEXTAREA|SELECT|OPTION/.test(r.nodeName)&&(!(r.getAttribute("type")||r.type||!1)||!/submit|button|cancel/i.tp))return!0;if(s(r).attr("contenteditable"))return!0;if(d.hasfocus||d.hasmousefocus&&!o||d.ispage&&!o&&!t){var i=e.keyCode;if(d.locked&&27!=i)return d.cancelEvent(e);var n=e.ctrlKey||!1,l=e.shiftKey||!1,a=!1;switch(i){case 38:case 63233:d.doScrollBy(72),a=!0;break;case 40:case 63235:d.doScrollBy(-72),a=!0;break;case 37:case 63232:d.railh&&(n?d.doScrollLeft(0):d.doScrollLeftBy(72),a=!0);break;case 39:case 63234:d.railh&&(n?d.doScrollLeft(d.page.maxw):d.doScrollLeftBy(-72),a=!0);break;case 33:case 63276:d.doScrollBy(d.view.h),a=!0;break;case 34:case 63277:d.doScrollBy(-d.view.h),a=!0;break;case 36:case 63273:d.railh&&n?d.doScrollPos(0,0):d.doScrollTo(0),a=!0;break;case 35:case 63275:d.railh&&n?d.doScrollPos(d.page.maxw,d.page.maxh):d.doScrollTo(d.page.maxh),a=!0;break;case 32:d.opt.spacebarenabled&&(l?d.doScrollBy(d.view.h):d.doScrollBy(-d.view.h),a=!0);break;case 27:d.zoomactive&&(d.doZoom(),a=!0)}if(a)return d.cancelEvent(e)}},d.opt.enablekeyboard&&d.bind(document,h.isopera&&!h.isopera12?"keypress":"keydown",d.onkeypress),d.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(d.wheelprevented=!0)}),d.bind(document,"keyup",function(e){e.ctrlKey||!1||(d.wheelprevented=!1)}),d.bind(window,"resize",d.lazyResize),d.bind(window,"orientationchange",d.lazyResize),d.bind(window,"load",d.lazyResize),h.ischrome&&!d.ispage&&!d.haswrapper){var z=d.win.attr("style"),T=parseFloat(d.win.css("width"))+1;d.win.css("width",T),d.synched("chromefix",function(){d.win.attr("style",z)})}d.onAttributeChange=function(e){d.lazyResize(250)},d.ispage||d.haswrapper||(!1!==m?(d.observer=new m(function(e){e.forEach(d.onAttributeChange)}),d.observer.observe(d.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),d.observerremover=new m(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var o in e.removedNodes)if(e.removedNodes[o]==d.win[0])return d.remove()})}),d.observerremover.observe(d.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(d.bind(d.win,h.isie&&!h.isie9?"propertychange":"DOMAttrModified",d.onAttributeChange),h.isie9&&d.win[0].attachEvent("onpropertychange",d.onAttributeChange),d.bind(d.win,"DOMNodeRemoved",function(e){e.target==d.win[0]&&d.remove()}))),!d.ispage&&d.opt.boxzoom&&d.bind(window,"resize",d.resizeZoom),d.istextarea&&d.bind(d.win,"mouseup",d.lazyResize),d.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){function k(e){d.iframexd=!1;try{var o="contentDocument"in this?this.contentDocument:this.contentWindow.document;o.domain}catch(e){d.iframexd=!0,o=!1}if(d.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(d.forcescreen=!0,d.isiframe&&(d.iframe={doc:s(o),html:d.doc.contents().find("html")[0],body:d.doc.contents().find("body")[0]},d.getContentSize=function(){return{w:Math.max(d.iframe.html.scrollWidth,d.iframe.body.scrollWidth),h:Math.max(d.iframe.html.scrollHeight,d.iframe.body.scrollHeight)}},d.docscroll=s(d.iframe.body)),!h.isios&&d.opt.iframeautoresize&&!d.isiframe){d.win.scrollTop(0),d.doc.height("");var t=Math.max(o.getElementsByTagName("html")[0].scrollHeight,o.body.scrollHeight);d.doc.height(t)}d.lazyResize(30),h.isie7&&d.css(s(d.iframe.html),{"overflow-y":"hidden"}),d.css(s(d.iframe.body),{"overflow-y":"hidden"}),h.isios&&d.haswrapper&&d.css(s(o.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?d.bind(this.contentWindow,"scroll",d.onscroll):d.bind(o,"scroll",d.onscroll),d.opt.enablemousewheel&&d.bind(o,"mousewheel",d.onmousewheel),d.opt.enablekeyboard&&d.bind(o,h.isopera?"keypress":"keydown",d.onkeypress),(h.cantouch||d.opt.touchbehavior)&&(d.bind(o,"mousedown",d.ontouchstart),d.bind(o,"mousemove",function(e){d.ontouchmove(e,!0)}),d.opt.grabcursorenabled&&h.cursorgrabvalue&&d.css(s(o.body),{cursor:h.cursorgrabvalue})),d.bind(o,"mouseup",d.ontouchend),d.zoom&&(d.opt.dblclickzoom&&d.bind(o,"dblclick",d.doZoom),d.ongesturezoom&&d.bind(o,"gestureend",d.ongesturezoom))}this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){k.call(d.doc[0],!1)},500),d.bind(this.doc,"load",k)}},this.showCursor=function(e,o){d.cursortimeout&&(clearTimeout(d.cursortimeout),d.cursortimeout=0),d.rail&&(d.autohidedom&&(d.autohidedom.stop().css({opacity:d.opt.cursoropacitymax}),d.cursoractive=!0),d.rail.drag&&1==d.rail.drag.pt||(void 0!==e&&!1!==e&&(d.scroll.y=Math.round(1*e/d.scrollratio.y)),void 0!==o&&(d.scroll.x=Math.round(1*o/d.scrollratio.x))),d.cursor.css({height:d.cursorheight,top:d.scroll.y}),d.cursorh&&(!d.rail.align&&d.rail.visibility?d.cursorh.css({width:d.cursorwidth,left:d.scroll.x+d.rail.width}):d.cursorh.css({width:d.cursorwidth,left:d.scroll.x}),d.cursoractive=!0),d.zoom&&d.zoom.stop().css({opacity:d.opt.cursoropacitymax}))},this.hideCursor=function(e){d.cursortimeout||d.rail&&d.autohidedom&&(d.hasmousefocus&&"leave"==d.opt.autohidemode||(d.cursortimeout=setTimeout(function(){d.rail.active&&d.showonmouseevent||(d.autohidedom.stop().animate({opacity:d.opt.cursoropacitymin}),d.zoom&&d.zoom.stop().animate({opacity:d.opt.cursoropacitymin}),d.cursoractive=!1),d.cursortimeout=0},e||d.opt.hidecursordelay)))},this.noticeCursor=function(e,o,t){d.showCursor(o,t),d.rail.active||d.hideCursor(e)},this.getContentSize=d.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:d.haswrapper?function(){return{w:d.doc.outerWidth()+parseInt(d.win.css("paddingLeft"))+parseInt(d.win.css("paddingRight")),h:d.doc.outerHeight()+parseInt(d.win.css("paddingTop"))+parseInt(d.win.css("paddingBottom"))}}:function(){return{w:d.docscroll[0].scrollWidth,h:d.docscroll[0].scrollHeight}},this.onResize=function(e,o){if(!d||!d.win)return!1;if(!d.haswrapper&&!d.ispage){if("none"==d.win.css("display"))return d.visibility&&d.hideRail().hideRailHr(),!1;d.hidden||d.visibility||d.showRail().showRailHr()}var t=d.page.maxh,r=d.page.maxw,i=(d.view.h,d.view.w);if(d.view={w:d.ispage?d.win.width():parseInt(d.win[0].clientWidth),h:d.ispage?d.win.height():parseInt(d.win[0].clientHeight)},d.page=o||d.getContentSize(),d.page.maxh=Math.max(0,d.page.h-d.view.h),d.page.maxw=Math.max(0,d.page.w-d.view.w),d.page.maxh==t&&d.page.maxw==r&&d.view.w==i){if(d.ispage)return d;var n=d.win.offset();if(d.lastposition){var s=d.lastposition;if(s.top==n.top&&s.left==n.left)return d}d.lastposition=n}return 0==d.page.maxh?(d.hideRail(),d.scrollvaluemax=0,d.scroll.y=0,d.scrollratio.y=0,d.cursorheight=0,d.setScrollTop(0),d.rail.scrollable=!1):d.rail.scrollable=!0,0==d.page.maxw?(d.hideRailHr(),d.scrollvaluemaxw=0,d.scroll.x=0,d.scrollratio.x=0,d.cursorwidth=0,d.setScrollLeft(0),d.railh.scrollable=!1):d.railh.scrollable=!0,d.locked=0==d.page.maxh&&0==d.page.maxw,d.locked?(d.ispage||d.updateScrollBar(d.view),!1):(d.hidden||d.visibility?d.hidden||d.railh.visibility||d.showRailHr():d.showRail().showRailHr(),d.istextarea&&d.win.css("resize")&&"none"!=d.win.css("resize")&&(d.view.h-=20),d.cursorheight=Math.min(d.view.h,Math.round(d.view.h*(d.view.h/d.page.h))),d.cursorheight=d.opt.cursorfixedheight?d.opt.cursorfixedheight:Math.max(d.opt.cursorminheight,d.cursorheight),d.cursorwidth=Math.min(d.view.w,Math.round(d.view.w*(d.view.w/d.page.w))),d.cursorwidth=d.opt.cursorfixedheight?d.opt.cursorfixedheight:Math.max(d.opt.cursorminheight,d.cursorwidth),d.scrollvaluemax=d.view.h-d.cursorheight-d.cursor.hborder,d.railh&&(d.railh.width=d.page.maxh>0?d.view.w-d.rail.width:d.view.w,d.scrollvaluemaxw=d.railh.width-d.cursorwidth-d.cursorh.wborder),d.ispage||d.updateScrollBar(d.view),d.scrollratio={x:d.page.maxw/d.scrollvaluemaxw,y:d.page.maxh/d.scrollvaluemax},d.getScrollTop()>d.page.maxh?d.doScrollTop(d.page.maxh):(d.scroll.y=Math.round(d.getScrollTop()*(1/d.scrollratio.y)),d.scroll.x=Math.round(d.getScrollLeft()*(1/d.scrollratio.x)),d.cursoractive&&d.noticeCursor()),d.scroll.y&&0==d.getScrollTop()&&d.doScrollTo(Math.floor(d.scroll.y*d.scrollratio.y)),d)},this.resize=d.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,d.delayed("resize",d.resize,e),d},this._bind=function(e,o,t,r){d.events.push({e:e,n:o,f:t,b:r,q:!1}),e.addEventListener?e.addEventListener(o,t,r||!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},this.jqbind=function(e,o,t){d.events.push({e:e,n:o,f:t,q:!0}),s(e).bind(o,t)},this.bind=function(e,o,t,r){var i="jquery"in e?e[0]:e;if("mousewheel"==o)if("onwheel"in d.win)d._bind(i,"wheel",t,r||!1);else{var n=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";x(i,n,t,r||!1),"DOMMouseScroll"==n&&x(i,"MozMousePixelScroll",t,r||!1)}else if(i.addEventListener){if(h.cantouch&&/mouseup|mousedown|mousemove/.test(o)){var s="mousedown"==o?"touchstart":"mouseup"==o?"touchend":"touchmove";d._bind(i,s,function(e){if(e.touches)e.touches.length<2&&((o=e.touches.length?e.touches[0]:e).original=e,t.call(this,o));else if(e.changedTouches){var o;(o=e.changedTouches[0]).original=e,t.call(this,o)}},r||!1)}d._bind(i,o,t,r||!1),h.cantouch&&"mouseup"==o&&d._bind(i,"touchcancel",t,r||!1)}else d._bind(i,o,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==t.call(i,e)&&!1!==r||d.cancelEvent(e)})},this._unbind=function(e,o,t,r){e.removeEventListener?e.removeEventListener(o,t,r):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=!1},this.unbindAll=function(){for(var e=0;e<d.events.length;e++){var o=d.events[e];o.q?o.e.unbind(o.n,o.f):d._unbind(o.e,o.n,o.f,o.b)}},this.cancelEvent=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1))},this.showRail=function(){return 0==d.page.maxh||!d.ispage&&"none"==d.win.css("display")||(d.visibility=!0,d.rail.visibility=!0,d.rail.css("display","block")),d},this.showRailHr=function(){return d.railh?(0==d.page.maxw||!d.ispage&&"none"==d.win.css("display")||(d.railh.visibility=!0,d.railh.css("display","block")),d):d},this.hideRail=function(){return d.visibility=!1,d.rail.visibility=!1,d.rail.css("display","none"),d},this.hideRailHr=function(){return d.railh?(d.railh.visibility=!1,d.railh.css("display","none"),d):d},this.show=function(){return d.hidden=!1,d.locked=!1,d.showRail().showRailHr()},this.hide=function(){return d.hidden=!0,d.locked=!0,d.hideRail().hideRailHr()},this.toggle=function(){return d.hidden?d.show():d.hide()},this.remove=function(){d.stop(),d.cursortimeout&&clearTimeout(d.cursortimeout),d.doZoomOut(),d.unbindAll(),h.isie9&&d.win[0].detachEvent("onpropertychange",d.onAttributeChange),!1!==d.observer&&d.observer.disconnect(),!1!==d.observerremover&&d.observerremover.disconnect(),d.events=null,d.cursor&&d.cursor.remove(),d.cursorh&&d.cursorh.remove(),d.rail&&d.rail.remove(),d.railh&&d.railh.remove(),d.zoom&&d.zoom.remove();for(var e=0;e<d.saved.css.length;e++){var o=d.saved.css[e];o[0].css(o[1],void 0===o[2]?"":o[2])}d.saved=!1,d.me.data("__nicescroll","");var t=s.nicescroll;for(var r in t.each(function(e){if(this&&this.id===d.id){delete t[e];for(var o=++e;o<t.length;o++,e++)t[e]=t[o];t.length--,t.length&&delete t[t.length]}}),d)d[r]=null,delete d[r];d=null},this.scrollstart=function(e){return this.onscrollstart=e,d},this.scrollend=function(e){return this.onscrollend=e,d},this.scrollcancel=function(e){return this.onscrollcancel=e,d},this.zoomin=function(e){return this.onzoomin=e,d},this.zoomout=function(e){return this.onzoomout=e,d},this.isScrollable=function(e){var o=e.target?e.target:e;if("OPTION"==o.nodeName)return!0;for(;o&&1==o.nodeType&&!/^BODY|HTML/.test(o.nodeName);){var t=s(o),r=t.css("overflowY")||t.css("overflowX")||t.css("overflow")||"";if(/scroll|auto/.test(r))return o.clientHeight!=o.scrollHeight;o=!!o.parentNode&&o.parentNode}return!1},this.getViewport=function(e){for(var o=!(!e||!e.parentNode)&&e.parentNode;o&&1==o.nodeType&&!/^BODY|HTML/.test(o.nodeName);){var t=s(o);if(/fixed|absolute/.test(t.css("position")))return t;var r=t.css("overflowY")||t.css("overflowX")||t.css("overflow")||"";if(/scroll|auto/.test(r)&&o.clientHeight!=o.scrollHeight)return t;if(t.getNiceScroll().length>0)return t;o=!!o.parentNode&&o.parentNode}return!!o&&s(o)},this.triggerScrollEnd=function(){if(d.onscrollend){var e=d.getScrollLeft(),o=d.getScrollTop(),t={type:"scrollend",current:{x:e,y:o},end:{x:e,y:o}};d.onscrollend.call(d,t)}},this.onmousewheel=function(e){if(!d.wheelprevented){if(d.locked)return d.debounced("checkunlock",d.resize,250),!0;if(d.rail.drag)return d.cancelEvent(e);if("auto"==d.opt.oneaxismousemode&&0!=e.deltaX&&(d.opt.oneaxismousemode=!1),d.opt.oneaxismousemode&&0==e.deltaX&&!d.rail.scrollable)return!d.railh||!d.railh.scrollable||d.onmousewheelhr(e);var o=+new Date,t=!1;if(d.opt.preservenativescrolling&&d.checkarea+600<o&&(d.nativescrollingarea=d.isScrollable(e),t=!0),d.checkarea=o,d.nativescrollingarea)return!0;var r=S(e,!1,t);return r&&(d.checkarea=0),r}},this.onmousewheelhr=function(e){if(!d.wheelprevented){if(d.locked||!d.railh.scrollable)return!0;if(d.rail.drag)return d.cancelEvent(e);var o=+new Date,t=!1;return d.opt.preservenativescrolling&&d.checkarea+600<o&&(d.nativescrollingarea=d.isScrollable(e),t=!0),d.checkarea=o,!!d.nativescrollingarea||(d.locked?d.cancelEvent(e):S(e,!0,t))}},this.stop=function(){return d.cancelScroll(),d.scrollmon&&d.scrollmon.stop(),d.cursorfreezed=!1,d.scroll.y=Math.round(d.getScrollTop()*(1/d.scrollratio.y)),d.noticeCursor(),d},this.getTransitionSpeed=function(e){var o=Math.round(10*d.opt.scrollspeed),t=Math.min(o,Math.round(e/20*d.opt.scrollspeed));return t>20?t:0},d.opt.smoothscroll?d.ishwscroll&&h.hastransition&&d.opt.usetransition?(this.prepareTransition=function(e,o){var t=o?e>20?e:0:d.getTransitionSpeed(e),r=t?h.prefixstyle+"transform "+t+"ms ease-out":"";return d.lasttransitionstyle&&d.lasttransitionstyle==r||(d.lasttransitionstyle=r,d.doc.css(h.transitionstyle,r)),t},this.doScrollLeft=function(e,o){var t=d.scrollrunning?d.newscrolly:d.getScrollTop();d.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=d.scrollrunning?d.newscrollx:d.getScrollLeft();d.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,t){var r=d.getScrollTop(),i=d.getScrollLeft();return((d.newscrolly-r)*(o-r)<0||(d.newscrollx-i)*(e-i)<0)&&d.cancelScroll(),0==d.opt.bouncescroll&&(o<0?o=0:o>d.page.maxh&&(o=d.page.maxh),e<0?e=0:e>d.page.maxw&&(e=d.page.maxw)),(!d.scrollrunning||e!=d.newscrollx||o!=d.newscrolly)&&(d.newscrolly=o,d.newscrollx=e,d.newscrollspeed=t||!1,!d.timer&&void(d.timer=setTimeout(function(){var t=d.getScrollTop(),r=d.getScrollLeft(),i={};i.x=e-r,i.y=o-t,i.px=r,i.py=t;var n=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),s=d.newscrollspeed&&d.newscrollspeed>1?d.newscrollspeed:d.getTransitionSpeed(n);if(d.newscrollspeed&&d.newscrollspeed<=1&&(s*=d.newscrollspeed),d.prepareTransition(s,!0),d.timerscroll&&d.timerscroll.tm&&clearInterval(d.timerscroll.tm),s>0){if(!d.scrollrunning&&d.onscrollstart){var l={type:"scrollstart",current:{x:r,y:t},request:{x:e,y:o},end:{x:d.newscrollx,y:d.newscrolly},speed:s};d.onscrollstart.call(d,l)}h.transitionend?d.scrollendtrapped||(d.scrollendtrapped=!0,d.bind(d.doc,h.transitionend,d.onScrollTransitionEnd,!1)):(d.scrollendtrapped&&clearTimeout(d.scrollendtrapped),d.scrollendtrapped=setTimeout(d.onScrollTransitionEnd,s));var a=t,c=r;d.timerscroll={bz:new BezierClass(a,d.newscrolly,s,0,0,.58,1),bh:new BezierClass(c,d.newscrollx,s,0,0,.58,1)},d.cursorfreezed||(d.timerscroll.tm=setInterval(function(){d.showCursor(d.getScrollTop(),d.getScrollLeft())},60))}d.synched("doScroll-set",function(){d.timer=0,d.scrollendtrapped&&(d.scrollrunning=!0),d.setScrollTop(d.newscrolly),d.setScrollLeft(d.newscrollx),d.scrollendtrapped||d.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!d.scrollendtrapped)return!0;var e=d.getScrollTop(),o=d.getScrollLeft();return d.scrollrunning=!1,h.transitionend||clearTimeout(h.transitionend),d.scrollendtrapped=!1,d._unbind(d.doc,h.transitionend,d.onScrollTransitionEnd),d.prepareTransition(0),d.setScrollTop(e),d.railh&&d.setScrollLeft(o),d.timerscroll&&d.timerscroll.tm&&clearInterval(d.timerscroll.tm),d.timerscroll=!1,d.cursorfreezed=!1,d.showCursor(e,o),d},this.onScrollTransitionEnd=function(){d.scrollendtrapped&&d._unbind(d.doc,h.transitionend,d.onScrollTransitionEnd),d.scrollendtrapped=!1,d.prepareTransition(0),d.timerscroll&&d.timerscroll.tm&&clearInterval(d.timerscroll.tm),d.timerscroll=!1;var e=d.getScrollTop(),o=d.getScrollLeft();if(d.setScrollTop(e),d.railh&&d.setScrollLeft(o),d.noticeCursor(!1,e,o),d.cursorfreezed=!1,e<0?e=0:e>d.page.maxh&&(e=d.page.maxh),o<0?o=0:o>d.page.maxw&&(o=d.page.maxw),e!=d.newscrolly||o!=d.newscrollx)return d.doScrollPos(o,e,d.opt.snapbackspeed);d.onscrollend&&d.scrollrunning&&d.triggerScrollEnd(),d.scrollrunning=!1}):(this.doScrollLeft=function(e,o){var t=d.scrollrunning?d.newscrolly:d.getScrollTop();d.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=d.scrollrunning?d.newscrollx:d.getScrollLeft();d.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,t){o=void 0===o||!1===o?d.getScrollTop(!0):o;if(d.timer&&d.newscrolly==o&&d.newscrollx==e)return!0;d.timer&&c(d.timer),d.timer=0;var r=d.getScrollTop(),i=d.getScrollLeft();((d.newscrolly-r)*(o-r)<0||(d.newscrollx-i)*(e-i)<0)&&d.cancelScroll(),d.newscrolly=o,d.newscrollx=e,d.bouncescroll&&d.rail.visibility||(d.newscrolly<0?d.newscrolly=0:d.newscrolly>d.page.maxh&&(d.newscrolly=d.page.maxh)),d.bouncescroll&&d.railh.visibility||(d.newscrollx<0?d.newscrollx=0:d.newscrollx>d.page.maxw&&(d.newscrollx=d.page.maxw)),d.dst={},d.dst.x=e-i,d.dst.y=o-r,d.dst.px=i,d.dst.py=r;var n=Math.round(Math.sqrt(Math.pow(d.dst.x,2)+Math.pow(d.dst.y,2)));d.dst.ax=d.dst.x/n,d.dst.ay=d.dst.y/n;var s=0,l=n;0==d.dst.x?(s=r,l=o,d.dst.ay=1,d.dst.py=0):0==d.dst.y&&(s=i,l=e,d.dst.ax=1,d.dst.px=0);var u=d.getTransitionSpeed(n);if(t&&t<=1&&(u*=t),d.bzscroll=u>0&&(d.bzscroll?d.bzscroll.update(l,u):new BezierClass(s,l,u,0,1,0,1)),!d.timer){(r==d.page.maxh&&o>=d.page.maxh||i==d.page.maxw&&e>=d.page.maxw)&&d.checkContentSize();var h=1;if(d.cancelAnimationFrame=!1,d.timer=1,d.onscrollstart&&!d.scrollrunning){var p={type:"scrollstart",current:{x:i,y:r},request:{x:e,y:o},end:{x:d.newscrollx,y:d.newscrolly},speed:u};d.onscrollstart.call(d,p)}!function e(){if(d.cancelAnimationFrame)return!0;if(d.scrollrunning=!0,h=1-h)return d.timer=a(e)||1;var o=0,t=sy=d.getScrollTop();d.dst.ay?(((r=(t=d.bzscroll?d.dst.py+d.bzscroll.getNow()*d.dst.ay:d.newscrolly)-sy)<0&&t<d.newscrolly||r>0&&t>d.newscrolly)&&(t=d.newscrolly),d.setScrollTop(t),t==d.newscrolly&&(o=1)):o=1;var r,i=sx=d.getScrollLeft();d.dst.ax?(((r=(i=d.bzscroll?d.dst.px+d.bzscroll.getNow()*d.dst.ax:d.newscrollx)-sx)<0&&i<d.newscrollx||r>0&&i>d.newscrollx)&&(i=d.newscrollx),d.setScrollLeft(i),i==d.newscrollx&&(o+=1)):o+=1;2==o?(d.timer=0,d.cursorfreezed=!1,d.bzscroll=!1,d.scrollrunning=!1,t<0?t=0:t>d.page.maxh&&(t=d.page.maxh),i<0?i=0:i>d.page.maxw&&(i=d.page.maxw),i!=d.newscrollx||t!=d.newscrolly?d.doScrollPos(i,t):d.onscrollend&&d.triggerScrollEnd()):d.timer=a(e)||1}(),(r==d.page.maxh&&o>=r||i==d.page.maxw&&e>=i)&&d.checkContentSize(),d.noticeCursor()}},this.cancelScroll=function(){return d.timer&&c(d.timer),d.timer=0,d.bzscroll=!1,d.scrollrunning=!1,d}):(this.doScrollLeft=function(e,o){var t=d.getScrollTop();d.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=d.getScrollLeft();d.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,t){var r=e>d.page.maxw?d.page.maxw:e;r<0&&(r=0);var i=o>d.page.maxh?d.page.maxh:o;i<0&&(i=0),d.synched("scroll",function(){d.setScrollTop(i),d.setScrollLeft(r)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,o){var t=0;o?t=Math.floor((d.scroll.y-e)*d.scrollratio.y):t=(d.timer?d.newscrolly:d.getScrollTop(!0))-e;if(d.bouncescroll){var r=Math.round(d.view.h/2);t<-r?t=-r:t>d.page.maxh+r&&(t=d.page.maxh+r)}return d.cursorfreezed=!1,py=d.getScrollTop(!0),t<0&&py<=0?d.noticeCursor():t>d.page.maxh&&py>=d.page.maxh?(d.checkContentSize(),d.noticeCursor()):void d.doScrollTop(t)},this.doScrollLeftBy=function(e,o){var t=0;o?t=Math.floor((d.scroll.x-e)*d.scrollratio.x):t=(d.timer?d.newscrollx:d.getScrollLeft(!0))-e;if(d.bouncescroll){var r=Math.round(d.view.w/2);t<-r?t=-r:t>d.page.maxw+r&&(t=d.page.maxw+r)}return d.cursorfreezed=!1,px=d.getScrollLeft(!0),t<0&&px<=0?d.noticeCursor():t>d.page.maxw&&px>=d.page.maxw?d.noticeCursor():void d.doScrollLeft(t)},this.doScrollTo=function(e,o){var t=o?Math.round(e*d.scrollratio.y):e;t<0?t=0:t>d.page.maxh&&(t=d.page.maxh),d.cursorfreezed=!1,d.doScrollTop(e)},this.checkContentSize=function(){var e=d.getContentSize();e.h==d.page.h&&e.w==d.page.w||d.resize(!1,e)},d.onscroll=function(e){d.rail.drag||d.cursorfreezed||d.synched("scroll",function(){d.scroll.y=Math.round(d.getScrollTop()*(1/d.scrollratio.y)),d.railh&&(d.scroll.x=Math.round(d.getScrollLeft()*(1/d.scrollratio.x))),d.noticeCursor()})},d.bind(d.docscroll,"scroll",d.onscroll),this.doZoomIn=function(e){if(!d.zoomactive){d.zoomactive=!0,d.zoomrestore={style:{}};var o=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],t=d.win[0].style;for(var r in o){var i=o[r];d.zoomrestore.style[i]=void 0!==t[i]?t[i]:""}d.zoomrestore.style.width=d.win.css("width"),d.zoomrestore.style.height=d.win.css("height"),d.zoomrestore.padding={w:d.win.outerWidth()-d.win.width(),h:d.win.outerHeight()-d.win.height()},h.isios4&&(d.zoomrestore.scrollTop=s(window).scrollTop(),s(window).scrollTop(0)),d.win.css({position:h.isios4?"absolute":"fixed",top:0,left:0,"z-index":n+100,margin:"0px"});var l=d.win.css("backgroundColor");return(""==l||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(l))&&d.win.css("backgroundColor","#fff"),d.rail.css({"z-index":n+101}),d.zoom.css({"z-index":n+102}),d.zoom.css("backgroundPosition","0px -18px"),d.resizeZoom(),d.onzoomin&&d.onzoomin.call(d),d.cancelEvent(e)}},this.doZoomOut=function(e){if(d.zoomactive)return d.zoomactive=!1,d.win.css("margin",""),d.win.css(d.zoomrestore.style),h.isios4&&s(window).scrollTop(d.zoomrestore.scrollTop),d.rail.css({"z-index":d.zindex}),d.zoom.css({"z-index":d.zindex}),d.zoomrestore=!1,d.zoom.css("backgroundPosition","0px 0px"),d.onResize(),d.onzoomout&&d.onzoomout.call(d),d.cancelEvent(e)},this.doZoom=function(e){return d.zoomactive?d.doZoomOut(e):d.doZoomIn(e)},this.resizeZoom=function(){if(d.zoomactive){var e=d.getScrollTop();d.win.css({width:s(window).width()-d.zoomrestore.padding.w+"px",height:s(window).height()-d.zoomrestore.padding.h+"px"}),d.onResize(),d.setScrollTop(Math.min(d.page.maxh,e))}},this.init(),s.nicescroll.push(this)},v=function(e){var o=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,t){o.stop();var r=o.time();o.steptime=0,o.lasttime=r,o.speedx=0,o.speedy=0,o.lastx=e,o.lasty=t,o.lastscrollx=-1,o.lastscrolly=-1},this.update=function(e,t){var r=o.time();o.steptime=r-o.lasttime,o.lasttime=r;var i=t-o.lasty,n=e-o.lastx,s=o.nc.getScrollTop()+i,l=o.nc.getScrollLeft()+n;o.snapx=l<0||l>o.nc.page.maxw,o.snapy=s<0||s>o.nc.page.maxh,o.speedx=n,o.speedy=i,o.lastx=e,o.lasty=t},this.stop=function(){o.nc.unsynched("domomentum2d"),o.timer&&clearTimeout(o.timer),o.timer=0,o.lastscrollx=-1,o.lastscrolly=-1},this.doSnapy=function(e,t){var r=!1;t<0?(t=0,r=!0):t>o.nc.page.maxh&&(t=o.nc.page.maxh,r=!0),e<0?(e=0,r=!0):e>o.nc.page.maxw&&(e=o.nc.page.maxw,r=!0),r?o.nc.doScrollPos(e,t,o.nc.opt.snapbackspeed):o.nc.triggerScrollEnd()},this.doMomentum=function(e){var t=o.time(),r=e?t+e:o.lasttime,i=o.nc.getScrollLeft(),n=o.nc.getScrollTop(),s=o.nc.page.maxh,l=o.nc.page.maxw;o.speedx=l>0?Math.min(60,o.speedx):0,o.speedy=s>0?Math.min(60,o.speedy):0;var a=r&&t-r<=60;(n<0||n>s||i<0||i>l)&&(a=!1);var c=!(!o.speedy||!a)&&o.speedy,d=!(!o.speedx||!a)&&o.speedx;if(c||d){var u=Math.max(16,o.steptime);if(u>50){var h=u/50;o.speedx*=h,o.speedy*=h,u=50}o.demulxy=0,o.lastscrollx=o.nc.getScrollLeft(),o.chkx=o.lastscrollx,o.lastscrolly=o.nc.getScrollTop(),o.chky=o.lastscrolly;var p=o.lastscrollx,m=o.lastscrolly,f=function(){var e=o.time()-t>600?.04:.02;o.speedx&&(p=Math.floor(o.lastscrollx-o.speedx*(1-o.demulxy)),o.lastscrollx=p,(p<0||p>l)&&(e=.1)),o.speedy&&(m=Math.floor(o.lastscrolly-o.speedy*(1-o.demulxy)),o.lastscrolly=m,(m<0||m>s)&&(e=.1)),o.demulxy=Math.min(1,o.demulxy+e),o.nc.synched("domomentum2d",function(){o.speedx&&(o.nc.getScrollLeft()!=o.chkx&&o.stop(),o.chkx=p,o.nc.setScrollLeft(p));o.speedy&&(o.nc.getScrollTop()!=o.chky&&o.stop(),o.chky=m,o.nc.setScrollTop(m));o.timer||(o.nc.hideCursor(),o.doSnapy(p,m))}),o.demulxy<1?o.timer=setTimeout(f,u):(o.stop(),o.nc.hideCursor(),o.doSnapy(p,m))};f()}else o.doSnapy(o.nc.getScrollLeft(),o.nc.getScrollTop())}},b=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e,o,t){var r=s.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollTop():b.call(e)},set:function(e,o){var t=s.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.setScrollTop(parseInt(o)):b.call(e,o),this}},e.fn.scrollTop=function(e){if(void 0===e){var o=this[0]&&s.data(this[0],"__nicescroll")||!1;return o&&o.ishwscroll?o.getScrollTop():b.call(this)}return this.each(function(){var o=s.data(this,"__nicescroll")||!1;o&&o.ishwscroll?o.setScrollTop(parseInt(e)):b.call(s(this),e)})};var y=e.fn.scrollLeft;s.cssHooks.pageXOffset={get:function(e,o,t){var r=s.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollLeft():y.call(e)},set:function(e,o){var t=s.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.setScrollLeft(parseInt(o)):y.call(e,o),this}},e.fn.scrollLeft=function(e){if(void 0===e){var o=this[0]&&s.data(this[0],"__nicescroll")||!1;return o&&o.ishwscroll?o.getScrollLeft():y.call(this)}return this.each(function(){var o=s.data(this,"__nicescroll")||!1;o&&o.ishwscroll?o.setScrollLeft(parseInt(e)):y.call(s(this),e)})};var x=function(e){var o=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var t=0,r=0;t<o.length;t++)e.call(o[t],r++);return o},this.push=function(e){o[o.length]=e,o.length++},this.eq=function(e){return o[e]},e)for(var t=0;t<e.length;t++){var r=s.data(e[t],"__nicescroll")||!1;r&&(this[this.length]=r,this.length++)}return this};!function(e,o,t){for(var r=0;r<o.length;r++)t(e,o[r])}(x.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,o){e[o]=function(){var e=arguments;return this.each(function(){this[o].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new x(this):this[e]&&s.data(this[e],"__nicescroll")||!1},e.extend(e.expr[":"],{nicescroll:function(e){return!!s.data(e,"__nicescroll")}}),s.fn.niceScroll=function(e,o){void 0===o&&("object"!=typeof e||"jquery"in e||(o=e,e=!1));var t=new x;void 0===o&&(o={}),e&&(o.doc=s(e),o.win=s(this));var r=!("doc"in o);return r||"win"in o||(o.win=s(this)),this.each(function(){var e=s(this).data("__nicescroll")||!1;e||(o.doc=r?s(this):o.doc,e=new w(o,s(this)),s(this).data("__nicescroll",e)),t.push(e)}),1==t.length?t[0]:t},window.NiceScroll={getjQuery:function(){return e}},s.nicescroll||(s.nicescroll=new x,s.nicescroll.options=f)});
